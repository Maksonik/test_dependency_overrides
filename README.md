# Демонстрация dependency injection в FastAPI

В репозитории представлены два минимальных примера, иллюстрирующих работу зависимостей в FastAPI.

## test_1 — автоматическая передача `Request`
- Цепочка зависимостей `Request -> MockDatabaseService -> BusinessService -> DataService -> обработчик /health`.
- `Request` автоматически подставляется FastAPI во все объекты, которые его объявляют, даже без явного `Depends`, если существует непрерывная цепочка от обработчика к конструктору.

## test_2 — глобальный singleton через `dependency_overrides`
- Логика иерархии сервисов та же, но создаётся фабричная функция `di_data_service`.
- В lifespan-приложении переопределяется зависимость так, чтобы возвращать один экземпляр `DataService`.
- В результате один и тот же сервис используется всеми запросами, реализуя поведение singleton на уровне приложения.
